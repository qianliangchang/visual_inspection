list_files ('C:/Users/Administrator/Desktop/新建文件夹 (2)', ['files','follow_links','recursive'], ImageFiles) 
tuple_regexp_select (ImageFiles, ['\\.(tif|tiff|gif|bmp|jpg|jpeg|jp2|png|pcx|pgm|ppm|pbm|xwd|ima|hobj)$','ignore_case'], ImageFiles) 
for Index := 0 to |ImageFiles| - 1 by 1 
    read_image (Image, ImageFiles[Index]) 
    * Image Acquisition 01: Do something 
    threshold (Image, Region, 180, 255) 
    connection (Region, ConnectedRegions) 
    select_shape_std (ConnectedRegions, SelectedRegions, 'max_area', 70) 
    smallest_circle (SelectedRegions, Row, Column, Radius) 
    gen_circle (Circle, Row, Column, Radius-10) 
    closing_circle (SelectedRegions, RegionClosing, 23.5) 
    intersection (Circle, RegionClosing, RegionIntersection) 
    reduce_domain (Image, RegionIntersection, ImageReduced) 
    lines_gauss (ImageReduced, Lines, 1.5, 3, 8, 'dark', 'true', 'bar-shaped', 'true') 
    select_contours_xld (Lines, SelectedContours, 'contour_length', 10, 99999, -0.5, 0.5) 
    dev_set_color ('red') 
    dev_set_line_width (3) 
    dev_display (Image) 
    dev_display (SelectedContours) 
    stop () 
endfor


主要思路就是把中间区域滤出来，然后通过lines_gauss算子找出需要的缺损区域
dev_close_window ()
dev_open_window (0, 0, 1280/2, 960/2, 'black', WindowHandle)
for I:=1 to 3 by 1
    read_image (Image,I+'.bmp')
    mean_image (Image, ImageMean, 9, 9)
    threshold (ImageMean, Regions, 109, 180)
    connection (Regions, ConnectedRegions)
    select_shape (ConnectedRegions, SelectedRegions, 'outer_radius', 'and', 130.85, 229.99)
    fill_up (SelectedRegions, RegionFillUp)
    erosion_circle (RegionFillUp, RegionErosion, 5)
    reduce_domain (Image, RegionFillUp, ImageReduced)
    threshold (ImageReduced, Regions1, 0, 148)
    connection (Regions1, ConnectedRegions1)
    select_shape (ConnectedRegions1, SelectedRegions1, 'area', 'and', 9765.43, 20000)
    fill_up (SelectedRegions1, RegionFillUp1)
    union1 (RegionFillUp1, RegionUnion)
    difference (RegionErosion, RegionUnion, RegionDifference)
    reduce_domain (ImageReduced, RegionDifference, ImageReduced1)
    dev_set_line_width (2) 
    lines_gauss (ImageReduced1, Lines, 1.6, 3, 8, 'dark', 'true', 'bar-shaped', 'true') 
    dev_display (Image) 
    dev_set_color ('red') 
    dev_display (Lines) 
    stop()
endfor